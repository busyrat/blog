(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{596:function(t,s,a){"use strict";a.r(s);var e=a(18),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx","aria-hidden":"true"}},[t._v("#")]),t._v(" nginx")]),t._v(" "),a("h2",{attrs:{id:"nginx启用压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx启用压缩","aria-hidden":"true"}},[t._v("#")]),t._v(" Nginx启用压缩")]),t._v(" "),a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开启压缩  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("gzip")]),t._v("  on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置允许压缩的页面最小字节数，页面字节数从header头得content-length中进行获取。默认值是0，不管页面多大都压缩。建议设置成大于2k的字节数，小于2k可能会越压越大。  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("gzip_min_length")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置系统获取几个单位的缓存用于存储gzip的压缩结果数据流。 例如 4 4k 代表以4k为单位，按照原始数据大小以4k为单位的4倍申请内存。 4 8k 代表以8k为单位，按照原始数据大小以8k为单位的4倍申请内存。  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果没有设置，默认值是申请跟原始数据相同大小的内存空间去存储gzip压缩结果。  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("gzip_buffers")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v("k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#压缩级别，1-10，数字越大压缩的越好，也越占用CPU时间  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("gzip_comp_level")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 默认值: gzip_types text/html (默认不对js/css文件进行压缩)  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 压缩类型，匹配MIME类型进行压缩  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不能用通配符 text/*  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# (无论是否指定)text/html默认已经压缩   ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置哪压缩种文本文件可参考 conf/mime.types  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("gzip_types")]),t._v(" text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("plain application"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("javascript text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("css application"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 值为1.0和1.1 代表是否压缩http协议1.0，选择1.0则1.0和1.1都可以压缩  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("gzip_http_version")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v("   \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# IE6及以下禁止压缩  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("gzip_disable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MSIE [1-6]\\."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 默认值：off  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# Nginx作为反向代理的时候启用，开启或者关闭后端服务器返回的结果，匹配的前提是后端服务器必须要返回包含"Via"的 header头。  ')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# off - 关闭所有的代理结果数据的压缩  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# expired - 启用压缩，如果header头中包含 "Expires" 头信息  ')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# no-cache - 启用压缩，如果header头中包含 "Cache-Control:no-cache" 头信息  ')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# no-store - 启用压缩，如果header头中包含 "Cache-Control:no-store" 头信息  ')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# private - 启用压缩，如果header头中包含 "Cache-Control:private" 头信息  ')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# no_last_modified - 启用压缩,如果header头中不包含 "Last-Modified" 头信息  ')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# no_etag - 启用压缩 ,如果header头中不包含 "ETag" 头信息  ')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# auth - 启用压缩 , 如果header头中包含 "Authorization" 头信息  ')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# any - 无条件启用压缩  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("gzip_proxied")]),t._v(" expired no"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cache no"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("store private "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("auth")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给CDN和代理服务器使用，针对相同url，可以根据头信息返回压缩和非压缩副本  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("gzip_vary")]),t._v(" on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n")])])]),a("h2",{attrs:{id:"设置消息头"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置消息头","aria-hidden":"true"}},[t._v("#")]),t._v(" 设置消息头")]),t._v(" "),a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("proxy_set_header")]),t._v(" X"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Real"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("IP "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$remote_addr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("proxy_set_header")]),t._v(" X"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Forwarded"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("For "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$proxy_add_x_forwarded_for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("proxy_set_header")]),t._v(" Host "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$server_port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"设置nginx可以访问软连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置nginx可以访问软连接","aria-hidden":"true"}},[t._v("#")]),t._v(" 设置nginx可以访问软连接")]),t._v(" "),a("ol",[a("li",[t._v("在http里添加 disable_symlinks off;")]),t._v(" "),a("li",[t._v("修改目录权限：chmod -R 777 file")]),t._v(" "),a("li",[t._v("实在不行修改nginx.conf文件: user root 使用root用户运行nginx。")])])])},[],!1,null,null,null);s.default=n.exports}}]);