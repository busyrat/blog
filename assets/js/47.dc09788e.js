(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{542:function(e,a,t){"use strict";t.r(a);var r=t(18),n=Object(r.a)({},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker","aria-hidden":"true"}},[e._v("#")]),e._v(" docker")]),e._v(" "),t("p",[e._v("Tip加速: dokcer -> Preferences -> Advanced -> Registry mirrors")]),e._v(" "),t("h2",{attrs:{id:"目标"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#目标","aria-hidden":"true"}},[e._v("#")]),e._v(" 目标")]),e._v(" "),t("ul",[t("li",[e._v("docker介绍")]),e._v(" "),t("li",[e._v("如何制作一个镜像")]),e._v(" "),t("li",[e._v("如何持久化容器数据")]),e._v(" "),t("li",[e._v("如何分享一个镜像")])]),e._v(" "),t("h2",{attrs:{id:"架构图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#架构图","aria-hidden":"true"}},[e._v("#")]),e._v(" 架构图")]),e._v(" "),t("p",[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/a75caef7gy1g3ihcawq4lj20r20f2n1k.jpg",alt:""}})]),e._v(" "),t("h2",{attrs:{id:"初识-docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初识-docker","aria-hidden":"true"}},[e._v("#")]),e._v(" 初识 docker")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("第一个 docker 服务")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ docker run ubuntu echo hello docker\n")])])])]),e._v(" "),t("li",[t("p",[e._v("第二个 docker 服务")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ docker run -p 8080:80 -d nginx\n04907b26c8a3756a449be983be09aac6ddd61b67e0fde4d49e04efd200e20b4d\n# -p(--publish list): Publish a container's port(s) to the host 即端口映射\n# -d(--detach): Run container in background and print container ID 后台运行\n\n# 修改 nginx 默认显示\n$ echo <html><h1>hello docker!</h1><html> tmp/index.html\n$ docker cp tmp/index.html 04907b26c8a3://usr/share/nginx/html\n\n# 停止\n$ docker stop 04907b26c8a3\n\n# 保存刚刚的修改，生成一个新的 image\n$ docker commit -m 'fun' 04907b26c8a3 nginx-fun\n$ sha256:f8cbe4b06e8237a68e2d806736682c99eb3138a2aa949527aa56782665bdf271\n")])])])])]),e._v(" "),t("h2",{attrs:{id:"制作一个-docker-镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#制作一个-docker-镜像","aria-hidden":"true"}},[e._v("#")]),e._v(" 制作一个 docker 镜像")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("第一个 dockerfile")]),e._v(" "),t("p",[e._v("编写一个 Dockerfile 文件")]),e._v(" "),t("div",{staticClass:"language-dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("FROM alpine:latest\nMAINTAINER wh\nCMD echo 'hello docker'\n")])])]),t("p",[e._v("打包："),t("code",[e._v("docker build -t hello_docker")]),e._v(" 得到一个新的 image")])]),e._v(" "),t("li",[t("p",[e._v("第二个 dockerfile")]),e._v(" "),t("div",{staticClass:"language-dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('FROM ubuntu\nMAINTAINER wh\nRUN apt-get update\nRUN apt-get install -y nginx\nCOPY index.html /var/www/html\nENTRYPOINT ["/usr/sbin/nginx", "-g", "daemon off;"]\nEXPOSE 80\n')])])]),t("p",[e._v("每一个语句都会生成一个新的 images")])])]),e._v(" "),t("h2",{attrs:{id:"持久化方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#持久化方案","aria-hidden":"true"}},[e._v("#")]),e._v(" 持久化方案")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Volume 提供独立于容器之外的持久化存储")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# 映射\n$ docker run -p 8080:80 -d -v $PWD/html:/usr/share/nginx/html nginx\n\n# 创建一个容器\n$ docker create -v $PWD/data:/vaar/mydata --name my ubuntu\n\n# 创建一个容器并继承上一个容器的挂载\n$ dokeer run -it --volumes-from my unbuntu /bin/bash\n")])])])]),e._v(" "),t("li",[t("p",[e._v("Registry 共享仓库")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("docker search xxx\ndocker pull xxx\n\ndocker login\ndocker push\n")])])])])]),e._v(" "),t("h2",{attrs:{id:"其他命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他命令","aria-hidden":"true"}},[e._v("#")]),e._v(" 其他命令")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# 查看日志\ndocker logs -f xxx\n\n# 打包镜像 -t(--tag) 起名字  -f(--file) 指定文件\ndocker build -t xxx:1.0 -f /root/Dockfile\n\n# 到容器内部\ndocker exec -it xxx /bin/bash\n")])])])])},[],!1,null,null,null);a.default=n.exports}}]);